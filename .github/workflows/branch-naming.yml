name: branch-naming
on: [push]
jobs:
  Check-Branch-Name:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@master
      - run: echo "💡 The ${{ github.repository }} repository has been cloned to the runner."
      - name: Get Branch Name
        shell: bash
        run: echo "Running on branch ${GITHUB_REF#refs/heads/} "
      - run: echo "##[set-output name=branch;]$(echo ${GITHUB_REF#refs/heads/})"
        id: extract_branch
      - name: Check Branch Name Prefix Success
        run: echo "🥳 Yay! Correct Prefix!"
        if: |
          startsWith(steps.extract_branch.outputs.branch, 'fix')
          || startsWith(steps.extract_branch.outputs.branch, 'feature')
          || startsWith(steps.extract_branch.outputs.branch, 'test')
          || startsWith(steps.extract_branch.outputs.branch, 'hotfix')
      - name: Check Branch Name Prefix Failure
        run: echo " 🤬 Name your branch correctly!"
        if: |
          !startsWith(steps.extract_branch.outputs.branch, 'fix')
          || !startsWith(steps.extract_branch.outputs.branch, 'feature')
          || !startsWith(steps.extract_branch.outputs.branch, 'test')
          || !startsWith(steps.extract_branch.outputs.branch, 'hotfix')
      - name: Log Event Object
        run: |
          cat << OBJECT
          ${{ toJson(github.event) }}
          OBJECT
      - name: Find Guilty Party
        run: | 
          cat << OBJECT
          ${{ toJson(github.event.pusher) }}
          OBJECT
      - name: End Job Status
        run: echo "🍏 This job's status is ${{ job.status }}."
        
